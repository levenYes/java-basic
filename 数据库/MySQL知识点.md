# MySQL知识点
## 1.LIMIT关键字
对于排序后的记录，如果希望只显示一部分，而不是全部。这时，就可以使用LIMIT关键字来实现，LIMIT的语法如下：
SELECT …[LIMIT offset\_start,row\_count]
其中offset\_start表示记录的起始偏移量，row\_count表示显示的行数。

## 2.WITH ROLLUP是可选语法
表明是否对分类聚合后的结果进行再汇总。

## 3.表连接
当需要同时显示多个表中的字段时，就可以用表连接来实现这样的功能。从大类上分，表连接分为内连接和外连接，它们之间的最主要区别是，内连接仅选出两张表中互相匹配的记录，而外连接会选出其他不匹配的记录。

外连接又分为左连接和右连接。左连接：包含所有的左边表中的记录甚至是右边表中没有和它匹配的记录。

## 4.MySQL存储引擎
MySQL5.5之前的默认存储引擎是MyISAM，5.5之后改为InnoDB。如果要修改默认的存储引擎，可以在参数文件中设置default-table-type。在创建新表的时候，可以通过增加ENGINE关键字设置新建表的存储引擎。

MyISAM不支持事务、也不支持外键、其优势是访问的速度快，对事务完整性没有要求或者以SELECT、INSERT为主的应用基本上都可以使用这个引擎来创建表。

MERGE存储引擎是一组MyISAM表的组合，这些MyISAM表必须结构完全相同，MERGE表本身并没有数据，对MERGE类型的表可以进行查询、更新、删除操作，这些操作实际上是对内部的MyISAM表进行的。

## 5.InnoDB存储引擎
InnoDB存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但是对比MyISAM的存储引擎，InnoDB写的处理效率差一些，并且会占用更多的磁盘空间以保留数据和索引。

InnoDB表的自动增长列可以手工插入，但是插入的值如果是空或者0，则实际插入的将是自动增长后的值。

自动增长列必须是索引。如果是组合索引，也必须是组合索引的第一列，但是对于MyISAM表，自动增长列可以是组合索引的其他列，这样插入记录后，自动增长列是按照组合索引的前面几列进行排序后递增的。

MySQL支持外键的存储引擎只有InnoDB，在创建外键的时候，要求父表必须有对应的索引，子表在创建外键的时候也会自动创建对应的索引。存储表和索引有两种方式：1、使用共享表空间存储；2、使用多表空间存储。

## 6.MEMORY存储引擎
MEMORY使用存在于内存中的内容来创建表。每个MEMORY表只实际对应一个磁盘文件，格式是.frm。MEMORY类型的表访问非常地快，因为它的数据是放在内存中的，并且默认使用HASH索引，但是一旦服务关闭，表中的数据就会丢失掉。

MEMORY类型的存储引擎主要用于那些内容变化不频繁的代码表，或者作为统计操作的中间结果表，便于高效地对中间结果进行分析并得到最终的统计结果。对存储引擎为MEMORY的表进行更新操作要谨慎，因为数据并没有实际写入到磁盘中，所以一定要对下次重新启动服务后如何获得这些修改后的数据有所考虑。

## 7.索引的设计和使用
MyISAM和InnoDB存储引擎的表默认创建的都是BTREE索引。MySQL目前还不支持函数索引，但是支持前缀索引，即对索引字段的前N个字符创建索引。

默认情况下，MEMORY存储引擎使用HASH索引，但也支持BTREE索引。

索引设计原则：
1. 搜索的索引列，不一定是所要选择的列。换句话说，最适合索引的列是出现在WHERE字句中的列，或连接子句中指定的列，而不是出现在SELECT关键字后的选择列表中的列。
2. 使用唯一索引。考虑某列中值的分布。索引的列的基数越大，索引的效果越好。例如，用来记录性别的列，只含有“M”和“F”，效果就不好。CREATE UNIQUE INDEX index\_name [USING index\_type] ON tbl\_name (index\_col\_name,…）
3. 使用短索引。如果对字符串列进行索引，应该指定一个前缀长度，只要有可能就应该这样做。例如，有一个CHAR(200)列，如果在前10个或20个字符内，多数值是唯一的，那么就不要对整个列进行索引。CREATE INDEX cityname on city (city(10))；
4. 利用最左前缀。在创建一个n列的索引时，实际是创建MySQL可利用的n个索引。多列索引可起几个索引的作用，因为可利用索引中最左边的列集来匹配行。这样的列集称为最左前缀。
5. 不要过度索引。
6. 对于InnoDB存储引擎的表，记录默认会按照一定的顺序保存，如果有明确的定义的主键，则按照主键顺序保存。如果没有主键，但是有唯一索引，那么就是按照唯一索引的顺序保存。

## 8.BTREE索引与HASH索引
MEMORY存储引擎的表可以选择使用BTREE索引或者HASH索引，两种不同类型的索引各有其不同的适用范围。HASH索引有一些重要的特征需要在使用的时候特别注意，如下所示。
- 只用于使用=或\<=\>操作符的等式比较。
- 优化器不能使用HASH索引来加速ORDER BY操作
- MySQL不能确定在两个值之间大约有多少行。如果将一个MyISAM表改为HASH索引的MEMORY表，会影响一些查询的执行效率。
- 只能使用整个关键字来搜索一行

而对于BTREE索引，当使用\>、\<、\>=、\<=、BETWEEN、!=或者\<\>，或者LIKE ‘pattern’ （其中‘pattern’不以通配符开始）操作符时，都可以使用相关列上的索引。

大多数的MySQL索引（如PRIMARY KEY、UNIQUE、INDEX和FULLTEXT等）在BTREE中存储。只是空间列类型的索引使用RTREE，并且MEMORY表还支持HASH索引。






